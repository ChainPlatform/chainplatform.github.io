(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[84283],{

/***/ 231970:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);__web_req__(67514);__web_req__(241494);self._7ccc7343da2ae983607b3819c7bc1f93 = self._7ccc7343da2ae983607b3819c7bc1f93 || {};(function(__c) {var X=__c.X;var L=__c.L;
var lec=function(a,b){const c=b.subscribe({next:d=>{"CREATE_COMMENT"===d.kind?a.IEa(d.eI):"DELETE_COMMENT"===d.kind?a.uTa(d.us):"VOTE_UPDATE"===d.kind&&a.kVa(d.CQ.us,d.CQ.CQ,d.BKb?"updated":void 0)}});return()=>c.unsubscribe()},mec=function(a,b){const c=b.subscribe({next:d=>{"PARTICIPANT_STATUS"===d.kind&&a.yYa(d.eKb)}});return()=>c.unsubscribe()},z$=async function(a,b){const c=new nec(b.id,a.ua),d=new oec(c.hma,c.OUa,a.Ps,a.ua,b.id,a.I,a.ie),e=new pec;var {e0a:f}=await __webpack_require__.me(921419).then(()=>({e0a:__c.kec}));
f=new f(()=>qec);a.connect({sessionId:b.id,vs:d,Nz:e,iO:f});a.setState({status:3,Gf:b,Nz:e,fI:c,vs:d,iO:f});d.Alb(b.id)},rec={Ce:"live_presentation_session_actioned",Sf(a){return __c.Qs({presenting_context:null==a.fd?void 0:__c.fL(a.fd),session_id:a.sessionId,source:a.source,action:a.action,design_id:a.wg,doctype_id:a.Cl,category_id:a.wc})}},sec={Ce:"live_audience_comment_displayed",Sf(a){return __c.Qs({presenting_context:null==a.fd?void 0:__c.fL(a.fd),session_id:a.sessionId,comment_id:a.us,source:a.source,
design_id:a.wg,doctype_id:a.Cl,category_id:a.wc})}},tec={Ce:"live_presentation_comment_sorting_interacted",Sf(a){return __c.Qs({presenting_context:null==a.fd?void 0:__c.fL(a.fd),session_id:a.sessionId,sort_order:a.ut,action:a.action})}},A$=__webpack_require__(519427),B$=A$.action,C$=A$.computed,D$=A$.observable,E$=A$.runInAction;var uec=__webpack_require__(127414).C;var vec=__webpack_require__(609917).O;var wec=__webpack_require__(17986).xQ;var xec=L(()=>({Lj:X("documentId",1)}));var yec=L(()=>({T6a:__c.Y(2),Lj:X(3)}));var zec=L(()=>({id:X(1)}));var Aec=L(()=>({Iob:__c.XM(1),Job:__c.XM(2,!0)}));var Bec=L(()=>({sessionId:X(1),spb:__c.K(2,Aec)}));var nec=class{static A(a){__c.Q(a,{sI:D$.ref,OUa:B$.bound,hma:B$.bound})}OUa(a){this.sI=a;this.ua.track(sec,{sessionId:this.sessionId,us:this.sI.id,source:"fullscreen_mode",wg:""})}hma(){this.sI=void 0}constructor(a,b){this.sessionId=a;this.ua=b;this.sI=(nec.A(this),void 0)}};var Cec=L(()=>({sessionId:X(1),us:X(2)}));var Dec=L(()=>({sessionId:X(1),us:X(2)}));var Eec=L(()=>({sessionId:X(1),us:X(2)}));var Fec=L(()=>({sessionId:X(1)}));var Gec=({comments:a,ut:b,bab:c})=>{switch(b){case "NEWEST":return a.sort((d,e)=>e.uB-d.uB);case "OLDEST":return a.sort((d,e)=>d.uB-e.uB);case "TOP_VOTED":return a.sort((d,e)=>{const f=c(e.id)-c(d.id);return 0!==f?f:d.uB-e.uB});default:throw Error(`Unknown sort order: ${b}`);}};var oec=class{static A(a){__c.Q(a,{comments:D$.deep,O2:D$.ref,ut:D$.ref,wM:D$.shallow,gI:D$.shallow,fVa:B$.bound,mTa:B$.bound,yBa:B$.bound,IEa:B$.bound,kVa:B$,uTa:B$.bound,bPa:B$.bound,TZ:B$.bound})}fVa(a){this.ut=a;this.yBa();this.ua.track(tec,{sessionId:this.sessionId,ut:this.ut.toLowerCase(),action:"change_sort_order"})}mTa(){this.yBa();this.ua.track(tec,{sessionId:this.sessionId,ut:this.ut.toLowerCase(),action:"refresh"})}yBa(){this.comments=Gec({comments:this.comments,ut:this.ut,bab:a=>this.wM.get(a)||
0})}IEa(a){-1===this.comments.findIndex(({id:b})=>b===a.id)&&(this.comments="NEWEST"===this.ut?[this.pXa(a),...this.comments]:[...this.comments,this.pXa(a)],this.Wja&&this.O2++)}uTa(a){this.comments=this.comments.filter(({id:b})=>b!==a)}bPa(){this.O2=0}egb(){this.Wja=!1}fgb(){this.Wja=!0}nCa(a){this.gI.has(a)?this.HIa(a):this.aIa(a)}constructor(a,b,c,d,e,f,g){this.Aqa=a;this.Ina=b;this.Ps=c;this.ua=d;this.sessionId=e;this.I=f;this.ie=g;this.comments=(oec.A(this),[]);this.O2=0;this.ut="NEWEST";this.wM=
new Map;this.gI=new Set;this.Wja=!1;this.kVa=(h,k,l)=>{this.wM.set(h,k);"voted"===l?this.gI.add(h):"updated"===l&&(this.gI.has(h)?this.gI.delete(h):this.gI.add(h))};this.HIa=async h=>{try{await this.Ps.HIa(new Dec({sessionId:this.sessionId,us:h}))}catch(k){this.I.oc(k)}};this.aIa=async h=>{try{await this.Ps.aIa(new Eec({sessionId:this.sessionId,us:h}))}catch(k){this.I.oc(k)}};this.Alb=async h=>{try{const k=await this.Ps.wCb(new Fec({sessionId:h}));E$(()=>{k.bFb.forEach(l=>{this.gI.add(l)});k.dLb.forEach(l=>
{this.wM.set(l.us,l.CQ)})})}catch(k){this.I.oc(k)}};this.pXa=h=>{this.wM.has(h.id)||this.wM.set(h.id,0);return{...h,Aqa:()=>this.Aqa(),Ina:()=>this.Ina(h),jU:!1,TZ:()=>this.TZ(h.id),CQ:C$(()=>this.wM.get(h.id)||0),ysb:C$(()=>this.gI.has(h.id)),nCa:k=>this.nCa(k)}};this.TZ=async h=>{const k=this.comments.find(({id:l})=>l===h);if(void 0!==k&&!k.jU){k.jU=!0;try{await this.Ps.TZ(new Cec({sessionId:this.sessionId,us:h}))}catch(l){__c.yj(this.ie,{Pu:__c.O("ojlXGA")}),this.I.oc(l)}finally{E$(()=>k.jU=!1)}}}}};var qec={origin:{x:.05,width:.15,y:1,height:0},kpb:{x:{min:-100,max:100},y:{min:-500,max:-300}}};var pec=class{static A(a){__c.Q(a,{count:D$.ref,yYa:B$.bound})}yYa(a){this.count=a}constructor(){this.count=(pec.A(this),0)}};var Hec,Iec;Hec=Symbol("Error starting live session");
Iec=class{static A(a){__c.Q(a,{state:D$.ref,C7:D$.ref,zM:C$,connect:B$,setState:B$})}get zM(){if(2===this.fb.status)return 3;if(this.C7)return 2;const a=this.Ps.zM;switch(a){case 2:return 0;case 1:return 1;case 0:case 3:return 2;default:throw new __c.F(a);}}async ABa(a,b){const c=this.state.Gf;c&&(await this.Ps.ABa({sessionId:c.id,body:{data:a}}),this.setState({...this.state,Gf:{...this.state.Gf,settings:b}}))}constructor(a,b,c,d,e,f,g){this.ie=a;this.Ps=b;this.I=c;this.fb=d;this.Lj=e;this.ua=f;this.m$=
g;this.state=(Iec.A(this),{status:0});this.C7=!1;this.OX=[];this.vT=async()=>{if(0===this.state.status){var h=this.Lj;try{const {Gf:k}=await this.Ps.c9a(new xec({Lj:h}));k&&await z$(this,k)}catch(k){this.I.oc(k)}}};this.startSession=async()=>{if(0===this.state.status||2===this.state.status){this.setState({status:1});var h=this.Lj;try{var k;const m=await this.Ps.c9a(new xec({Lj:h}));if(m.Gf)await z$(this,m.Gf),__c.yj(this.ie,{Pu:__c.O("dX07Ng")});else{var l=await this.Ps.Sxb(new yec({Lj:h,T6a:null===
(k=this.m$)||void 0===k?void 0:k.default}));await z$(this,l.Gf);this.ua.track(rec,{sessionId:l.Gf.id,source:"fullscreen_mode",action:"new_session",wg:""})}}catch(m){this.setState({status:2}),__c.yj(this.ie,{Pu:__c.O("iUnTqw"),sR:{jy:__c.O("T9Fgtw"),onClick:this.startSession},group:Hec}),this.I.oc(m)}}};this.qpb=async()=>{if(3===this.state.status||5===this.state.status){this.setState({...this.state,status:4});var h=this.state,k=this.state.Gf;try{await this.Ps.myb(new zec({id:k.id})),this.dispose(),
this.setState({status:0}),this.ua.track(rec,{sessionId:k.id,source:"fullscreen_mode",action:"end_session",wg:""})}catch(l){l instanceof __c.TL?(this.dispose(),this.setState({status:0})):this.setState({...h,status:5})}}};this.connect=({sessionId:h,vs:k,Nz:l,iO:m})=>{this.dispose();h=this.Ps.C4a(new Bec({sessionId:h,spb:{Iob:!1,Job:!0}}),uec);h=vec(()=>new wec)(h);this.C7=!1;this.tEa=h.subscribe({next:p=>{"SESSION_EXPIRED"===p.kind&&(this.dispose(),this.setState({status:0}))},error:p=>{this.state.Gf&&
(this.dispose(),this.I.error(p),E$(()=>this.C7=!0))}});k=lec(k,h);l=mec(l,h);const n=h.subscribe({next:p=>{"CREATE_REACTION"===p.kind&&m.O1a(p.reaction)}});this.OX.push(l);this.OX.push(k);this.OX.push(()=>n.unsubscribe());h.connect()};this.Cab=h=>{if(this.state.Gf)switch(h){case 0:case 1:case 3:this.dispose();break;case 2:this.connect({sessionId:this.state.Gf.id,vs:this.state.vs,Nz:this.state.Nz,iO:this.state.iO});break;default:throw new __c.F(h);}};this.setState=h=>{this.state=h};this.dispose=()=>
{var h;this.OX.forEach(k=>k());this.OX=[];null===(h=this.tEa)||void 0===h?void 0:h.unsubscribe();this.tEa=void 0};this.Ps.vxb.subscribe(this.Cab);this.vT()}};__c.JOa={};__c.JOa.f0a=Iec;
}).call(self, self._7ccc7343da2ae983607b3819c7bc1f93);}

}])
//# sourceMappingURL=sourcemaps/2ff3a971f448dc79.js.map