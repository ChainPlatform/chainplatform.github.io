(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[38226],{

/***/ 129465:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(813110);self._7ccc7343da2ae983607b3819c7bc1f93 = self._7ccc7343da2ae983607b3819c7bc1f93 || {};(function(__c) {var Y=__c.Y;var L=__c.L;
var aIb=async function(a,b){b=b.XVa.map(c=>a.VGa[c]).filter(c=>!!c);return new $Hb({closedCaptions:b})},cIb=function(a,b){const c=[];let d=0,e=0;for(;d<a.length&&e<b.length;){const f=a[d],g=b[e];bIb(f,g)?(c.push(f),d++,e++):f.nq<g.nq?(c.push(f),d++):(c.push(g),e++)}for(;d<a.length;)c.push(a[d]),d++;for(;e<b.length;)(a=null===c||void 0===c?void 0:c[c.length-1])&&bIb(a,b[e])||c.push(b[e]),e++;return c},dIb=function(a){var b,c;const d=1E3*(null!==(c=null===(b=window.navigator.connection)||void 0===b?
void 0:b.rtt)&&void 0!==c?c:0);return a.EEa+2*d},fIb=async function(a){for(const c of a.$w.keys()){var b;const d=null!==(b=a.uva.get(c))&&void 0!==b?b:0;100<=d?a.gW(c):a.uva.set(c,d+1)}b=Array.from(a.$w,([c,d])=>({id:c,Hd:d}));b=await eIb(a,b);(await Promise.allSettled(b.closedCaptions.map(async c=>{if(c.Nr){var d=a.$w.get(c.Nr);a.Naa(c,d);"IMPORTED"===c.status&&await a.Roa(c.Nr,c.WY)}}))).forEach(c=>{var d;"rejected"===c.status&&(null===(d=a.I)||void 0===d?void 0:d.error(c.reason))})},hIb=function(a){var b=
window;let c;const d=()=>{c=b.setTimeout(async()=>{fIb(a).catch(e=>{var f;return null===(f=a.I)||void 0===f?void 0:f.error(e)}).finally(()=>null!=c&&d())},1E4)};gIb(()=>a.ZRa,e=>{e?d():(b.clearTimeout(c),c=void 0)},{fireImmediately:!0})},eIb=async function(a,b){b=new iIb({XVa:b.map(c=>c.id),Mob:b.map(c=>c.Hd).filter(__c.yb),cra:void 0,Y8a:!0});return await aIb(a.jS,b)},kIb=async function(a,b){b.forEach(h=>{a.vxa(h.id,h.Hd)});const c=(await eIb(a,b).catch(h=>{b.forEach(k=>a.gW(k.id));throw Error(h);
})).closedCaptions,d=new Map,[e,f]=__c.mw(b,h=>c.some(k=>k.Nr===h.id&&void 0===k.cra));e.forEach(h=>{const k=c.find(l=>l.Nr===h.id);k&&(d.set(h.id,k.WY),a.Naa(k,h.Hd))});const g=f.map(async h=>{const k=await jIb(a,h);a.Naa(k,h.Hd);d.set(h.id,k.WY)});(await Promise.allSettled(g)).forEach(h=>{var k;"rejected"===h.status&&(null===(k=a.I)||void 0===k?void 0:k.error(h.reason))});return d},jIb=async function(a,b){try{const c=await a.z9(b);return(await a.gba(c.gZ.id,b.Hd)).gZ}catch(c){throw a.gW(b.id),c;
}},lIb=async function(a,b){const c=__c.D(b.url);a=await a.fetch(c);__c.C(Array.isArray(a));a=a.map(d=>{d=__c.ua(d);return{text:__c.hxa.required("text",d),nq:__c.kXa.optional("startTimeUs",d)||0,J:__c.kXa.optional("durationUs",d)||0}});return{url:c,F3a:{xJ:b.xJ,B8:a,Gba:!0}}},bIb=function(a,b){return a.nq<b.nq+b.J&&a.nq+a.J>b.nq},mIb=L(()=>({SGb:__c.X(1),Bb:(0,__c.$M)(2)})),nIb=L(()=>({gZ:__c.Sa(1,__c.xW),DKb:__c.K(2,mIb)})),oIb=L(()=>({gZ:__c.Sa(1,__c.xW)}));__c.pM.prototype.gba=__c.ea(20,async function(){return new oIb({gZ:__c.yW})});
__c.pM.prototype.qS=__c.ea(19,async function(){throw Error("Not implemented");});__c.pM.prototype.z9=__c.ea(18,async function(){return new nIb({gZ:__c.yW})});var $Hb=L(()=>({closedCaptions:__c.Ta(1,__c.xW)})),O0=__webpack_require__(519427),P0=O0.action,pIb=O0.computed,Q0=O0.observable,gIb=O0.reaction,qIb=O0.runInAction;var rIb=__webpack_require__(17986).xQ;var sIb=L(()=>({Nr:__c.X(1),X4:Y(2),Vya:__c.TM(3)}));var iIb=L(()=>({type:__c.G("A?",1,"SOURCEIDS"),XVa:__c.WM(1),Mob:__c.WM(2),cra:Y(3),Y8a:__c.YM(4)}));var tIb=L(()=>({pGb:Y(1),qGb:Y(2),type:__c.G("A?",3,"AUTO"),Nr:__c.X(31),IK:__c.YM(32),DE:Y(33),X4:Y(34)}));var uIb=L(()=>({id:__c.X(1),X4:Y(2)}));var vIb;
vIb=class{static A(a){__c.Q(a,{aS:Q0.shallow,$w:Q0.shallow,B_:Q0.shallow,uva:Q0.shallow,Sfa:P0,ZRa:pIb,nxa:P0,vxa:P0,gW:P0.bound,Roa:P0,Naa:P0.bound})}Baa(a){return this.aS.get(a)}Sfa(a,b){this.aS.set(a,b);this.B_.delete(a)}Fra(a){return this.$w.has(a)&&!this.aS.has(a)}get ZRa(){return 0<this.$w.size}get Cra(){return this.OT.BP}nxa(a){this.OT.BP=a}vxa(a,b){this.$w.set(a,b)}Fba(a){return this.B_.has(a)}gW(a){this.B_.add(a);this.$w.delete(a)}async Exa({media:a,lmb:b,onError:c}){var d;if(!this.jS.qS)return!1;if((null===
(d=this.aS.get(a.id))||void 0===d?0:d.Gba)||this.Fba(a.id))return!0;if(this.g5.get(a)){var e;null===(e=this.I)||void 0===e?void 0:e.DQ("Requesting new connection for media with existing connection");this.q6(a)}d=dIb(this);const f=performance.now();d=await this.qS(a.id,a.Hd,a.Dy+d);let g=!1;this.g5.set(a,d.subscribe(h=>{qIb(()=>{if(!g&&3!==h.resultType){const k=1E3*(performance.now()-f);3E6<k&&b&&(this.EEa=k)}g=!0;if(h.oH.length)this.onMessage(a.id,h)})},h=>{var k;null===c||void 0===c?void 0:c();this.g5.delete(a);
this.gW(a.id);null===(k=this.I)||void 0===k?void 0:k.error(h)}));return!0}q6(a){var b;null===(b=this.g5.get(a))||void 0===b?void 0:b.unsubscribe();this.g5.delete(a)}onMessage(a,b){var c=this.aS.get(a);if(null===c||void 0===c||!c.Gba)if(3===b.resultType)b={xJ:b.xJ,B8:[...b.oH],Gba:!0},this.Sfa(a,b),this.$w.delete(a),this.B_.delete(a);else{var d=this.mHa.get(a),e,f=null!==(e=null===d||void 0===d?void 0:d.reduce((h,k)=>cIb(h,k.oH),[]))&&void 0!==e?e:[],g;c=null!==(g=null===c||void 0===c?void 0:c.B8)&&
void 0!==g?g:[];f=[f,b.oH,c].reduce((h,k)=>cIb(h,k),[]);this.Sfa(a,{xJ:b.xJ,B8:f,Gba:!1});b.BDb||this.mHa.set(a,d?[...d,b]:[b])}}async qS(a,b,c){if(!this.jS.qS)throw Error();const d=new rIb;return await this.jS.qS(new sIb({Nr:a,X4:b,Vya:c}),d)}async V$(a){const b=d=>this.$w.has(d)||this.Baa(d);a=__c.Ze(a,d=>d.id).filter(d=>!b(d.id));if(!(1>a.length)){var c=await kIb(this,a);await Promise.all(a.map(d=>this.Roa(d.id,c.get(d.id))))}}async Roa(a,b){if(b&&0!==b.length)for(const c of b)if(c.url){b=await lIb(this,
c);this.Sfa(a,b.F3a);break}}async z9(a){a=new tIb({Nr:a.id,X4:a.Hd,DE:void 0,IK:!0});return await this.jS.z9(a)}async gba(a,b){a=new uIb({id:a,X4:b});return await this.jS.gba(a)}Naa(a,b){const c=a.Nr,d=a.C_;if(c)switch(a.status){case "UPLOADING":case "PROCESSING":this.vxa(c,b);break;case "FAILED":if("NO_AUDIO_STREAM"===d){this.$w.delete(c);break}this.gW(c);break;case "IMPORTED":this.$w.delete(c)}}constructor(a,b,c,d,e=f=>window.fetch(f).then(g=>g.json())){this.jS=a;this.OT=b;this.DE=c;this.I=d;this.fetch=
e;this.aS=(vIb.A(this),new Map);this.mHa=new Map;this.EEa=3E6;this.$w=new Map;this.B_=new Set;this.uva=new Map;this.g5=new Map;hIb(this)}};__c.Fvb={};__c.Fvb.c_a=vIb;
}).call(self, self._7ccc7343da2ae983607b3819c7bc1f93);}

}])